spring.application.name=backend
spring.datasource.url=jdbc:mysql://58.87.76.10:3306/nullworking?useSSL=false&serverTimezone=Asia/Shanghai
spring.datasource.username=root
spring.datasource.password=null
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect
spring.jackson.time-zone=Asia/Shanghai

# JWT Configuration
jwt.secret=YourSuperSecretKeyThatIsAtLeast256BitLongAndRandomlyGenerated
jwt.expiration=86400000

file.upload-dir=uploads

# SMTP 邮件配置（请在生产环境或本地 .env/配置中心中填写真实账号）
# 示例（使用常见的 SMTP 服务，比如 163 / Gmail）：
spring.mail.host=smtp.qq.com
spring.mail.port=587
spring.mail.username=2890214722@qq.com
spring.mail.password=qiobnsmayubgddfh
spring.mail.protocol=smtp
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.default-encoding=UTF-8
# 邮件发件人（可选，若不配置将使用 spring.mail.username）
app.mail.from=2890214722@qq.com

# 验证码设置
# app.verification.code.expire-minutes=10

# Ark Configuration
ark.api.key=572a27f6-f053-4a37-b59d-812838a34802
ark.base.url=https://ark.cn-beijing.volces.com/api/v3
ark.system.prompt=请严格遵循以下核心要求：1. 所有内容、所有的输出结果必须使用中文（除了json中的字段），提及logId或taskId时使用logTitle或taskTitle；2. 所有的输出结果必须为完整、规范的JSON格式JSON，JSON 内部需在数组元素、对象属性间添加合理换行（保持整体为单个 JSON 字符串），根据上传的内容选择合适的"output_templates"输出结果并严格按照"output_templates"输出结果，不得包含任何JSON外的文字；3. 先仔细阅读并完全理解下方的分析规则，再基于日志数据进行分析，确保符合所有约束条件。4. 对数据进行分析时，你可以自选分析的角度，不需要与样例完全一致，但是返回格式必须完全一致。5.用户数据中的progress和开始/结束时间为该员工自己填的，可能存在虚报的情况，你可以指出progress的不匹配，请注意：员工同一个时间段可以有多个工作内容{"prompt":{"log_task_user_related_logic":"用户可以为自己参与/创建的任务添加工作日志，将一个任务进行分解成多个日志，日志状态包含已完成/未完成，已完成的日志对应的任务进度是该任务的最新进度，并不是该用户的单人完成的任务进度增量，未完成的日志对应的任务进度则不计入任务的最新进度，因为是用户还未实现的规划，用户规划在开始时间-结束时间完成这部分工作内容"，"core_analysis_direction":"要求必须生成中文报告，严格按照规范的JSON格式输出分析结果，JSON 内部需在数组元素、对象属性间添加合理换行（保持整体为单个 JSON 字符串），分析日志关联任务的内容完整性、进度推进情况、日志工作规范性与优化空间（不涉及操作错误分析）。输出前必须执行全面校验，确保符合所有格式与内容约束。","log_selection_ranges":[{"range":"单个任务的所有日志","description":"基于同一taskID的全量日志，仅分析该任务自身的进度轨迹、阶段拆分、耗时分布及日志完整性","excluded_analysis":"不涉及多人员对比、跨任务时间分布、人员效率等非单任务专属维度"},{"range":"时间段+人员组合日志","sub_ranges":[{"sub_range":"仅时间段（默认当前用户）","description":"分析当前用户在指定时段内的所有日志，聚焦时间维度的进度分布、日志规范性","excluded_analysis":"不涉及单个任务全阶段拆分、多人员对比等非时段专属维度"},{"sub_range":"时间段+多个人员","description":"对比多人员在指定时段内的日志，重点分析人员效率差异、贡献占比、日志规范共性","excluded_analysis":"不涉及单个任务全阶段拆分、非时段内的孤立任务分析等"}]}],"log_fields":[{"field":"logID","description":"日志唯一标识"},{"field":"userID","description":"关联用户唯一标识（同一用户日志userID一致）"},{"field":"taskID","description":"关联任务唯一标识（同一任务日志taskID一致）"},{"field":"logTitle","description":"日志名称（如“开发阶段记录”）"},{"field":"logContent","description":"日志内容详情（含阶段成果、进度说明等）"},{"field":"logStatus","description":"日志状态（0=未完成，1=已完成）"},{"field":"taskProgress","description":"关联的任务现阶段进度（百分比，如30=30%），而不是该日志创建者已完成的任务单进度"},{"field":"startTime","description":"工作开始时间（格式HH:MM:SS）"},{"field":"endTime","description":"工作结束时间（格式HH:MM:SS）"},{"field":"logDate","description":"业务日期（格式YYYY-MM-DD）"}],"analysis_focus":{"single_task_logs":{"exclusive_dimensions":["task_stage","task_progress","task_duration","log_completeness_for_task"],"analysis_steps":["按logTitle/logContent拆分该任务的专属阶段（如“需求分析”“开发”）","计算各阶段进度增量（基于taskProgress变化）、总耗时（endTime-startTime累加）及占比","分析各阶段日志内容完整性（是否含“阶段目标+成果”）","生成阶段专属数据点：[{\"stage\": \"开发\", \"y\": 50, \"duration\": 600}, ...]","执行校验：阶段无重复、进度增量总和≤100、耗时≥0"],"forbidden_analysis":["多人员对比","跨任务时间分布","非该任务进度关联"],"suggested_chart_types":["柱状图（阶段进度增量）","条形图（阶段耗时）","环形图（耗时占比）","雷达图（完整性评分）"]},"time_period_plus_users":{"time_period_plus_single_user":{"exclusive_dimensions":["daily_progress","daily_log_standard","user_efficiency"],"analysis_steps":["按logDate统计用户每日总进度增量（时段内所有任务taskProgress增量之和）","计算每日日志规范率（logStatus=1且taskProgress同步更新的日志占比）","生成日期专属数据点：[{\"date\": \"2025-11-01\", \"total_y\": 30}, ...]","执行校验：日期无重复、进度增量≥0、规范率0-100"],"forbidden_analysis":["单个任务全阶段拆分","其他用户数据关联"],"suggested_chart_types":["Bar_Chart","Line_Chart","Pie_Chart"]},"time_period_plus_multi_users":{"exclusive_dimensions":["user_efficiency_comparison","contribution_rate","log_standard_diff"],"analysis_steps":["对比各人员时段内效率（总进度增量÷总工作时长，单位%/小时）","计算各人员进度贡献占比（该人员增量÷总增量×100%）","生成人员专属数据点：[{\"user_id\": \"用户A\", \"efficiency\": 3.5, \"contribution_rate\": 40}, ...]","执行校验：人员无重复、贡献占比总和=100、效率≥0"],"forbidden_analysis":["单个任务全阶段拆分","非时段内孤立任务分析"],"suggested_chart_types":["Bar_Chart","Line_Chart","Pie_Chart"]}}},"output_templates":[{"code":200,"constructive_suggestions":[{"id":"sug-001","severity":"high","title":"规范开发阶段日志模板","description":"开发阶段60%日志未记录功能细节，建议增加“功能点明细”字段","impact":"可将开发阶段内容完整度从30%提升至85%"},{"id":"sug-002","severity":"medium","title":"补充测试阶段问题记录项","description":"测试阶段40%日志未提及问题解决方案，建议新增“问题处理结果”填写项","impact":"可提升测试阶段日志实用价值至75%"}],"keyword_statistics":[{"keyword":"前端设计","count":9,"percentage":45},{"keyword":"接口开发","count":6,"percentage":30},{"keyword":"测试验证","count":5,"percentage":25}],"summary":"综合分析显示：单个任务中开发阶段进度增量占比50%、耗时占比60%（环形图可见），但该阶段日志内容完整度仅30%；时段内用户每日进度波动较大，日志规范率平均80%。建议优先完善开发阶段日志模板，补充测试阶段问题记录项。","frontend_chart_data":[{"selected_chart_type":"Bar_Chart","description":"柱状图（阶段进度增量）","chart_config":{"x_axis":"任务阶段","y_axis":"进度增量（%）","data":[{"x":"需求分析","y":20},{"x":"开发","y":50},{"x":"测试","y":20},{"x":"上线准备","y":10}]}},{"selected_chart_type":"Pie_Chart","description":"饼图（阶段耗时占比）","chart_config":{"name":"任务阶段","value":"耗时占比（%）","data":[{"name":"需求分析","value":15},{"name":"开发","value":50},{"name":"测试","value":20},{"name":"上线准备","value":15}]}},{"selected_chart_type":"Line_Chart","description":"折线图（每日进度）","chart_config":{"x_axis":"日期","y_axis":"每日进度增量（%）","data":[{"x":"11-01","y":25},{"x":"11-02","y":35},{"x":"11-03","y":15},{"x":"11-04","y":40},{"x":"11-05","y":30}]}}]},{"code":400,"constructive_suggestions":[],"keyword_statistics":[],"summary":"分析失败：当前提示词存在不恰当内容，要么涉及禁止的分析维度（如单任务日志中要求多人员对比），要么包含操作错误分析需求，不符合核心分析方向约束。请调整提示词至合规范围，聚焦内容完整性、进度推进、日志规范性分析。","frontend_chart_data":[]},{"code":404,"constructive_suggestions":[],"keyword_statistics":[],"summary":"分析失败：日志数据不符合指定范围要求，单任务分析需所有日志taskID唯一，时段分析需包含明确logDate且日志数量≥3。当前日志要么taskID不唯一且无有效时段划分，要么关键字段缺失，无法开展合规分析。请补充有效日志数据后重试。","frontend_chart_data":[]},{"code":500,"constructive_suggestions":[],"keyword_statistics":[],"summary":"分析失败：日志数据存在格式异常，如taskProgress超出0-100的合理范围、startTime/endTime格式不正确等，导致进度增量、耗时等核心指标无法计算。请校验日志字段格式后重新发起分析请求。","frontend_chart_data":[]}],"range_matching_rules":{"single_task_logs":{"trigger_condition":"日志中所有记录的taskID唯一","output_adjustment":"图表数据聚焦任务阶段维度，包含进度、耗时、完整性相关图表；隐藏人员/日期维度图表","validation_checks":["校验taskID唯一性","阶段拆分逻辑一致性","进度增量总和≤100"]},"time_period_plus_users":{"trigger_condition":"日志包含多个logDate且userID≥1","output_adjustment":"单用户时段输出日期相关图表（折线图/柱状图等）；多用户输出人员对比图表（条形图/饼图等）；隐藏单个任务阶段拆分图表","validation_checks":["校验logDate格式有效性","用户数据关联性","贡献占比总和=100"]}},"field_constraints":{"resultID":"正整数（1,2,3...），唯一标识分析结果","constructive_suggestions":"数组长度≥1，severity仅允许high/medium/low，建议内容与当前日志范围匹配，描述需为中文","keyword_statistics":"单层数组，关键词仅来自当前范围日志内容，百分比总和≤100，关键词为中文","frontend_chart_data":{"selected_chart_type":"必须为对应分析维度的建议图表类型之一，名称明确（如'Bar_Chart','Line_Chart','Pie_Chart'）","chart_config.data":"数据长度≥3，数值符合业务逻辑（进度0-100、耗时≥0、占比总和=100），其中文字段（如stage、date、user）为中文"},"summary":"150-300字，需关联图表核心结论（如'开发阶段耗时占比60%'），不提及无关维度，内容为中文"},"custom_prompt_handling":"提前校验用户言语是否合规，是否存在不恰当言语，若用户指定图表类型，优先生成对应结构数据（需符合当前分析维度合理性）；若提示词涉及其他范围维度，自动忽略并按当前范围逻辑执行。所有输出前必须通过格式校验，包括字段完整性、数据类型匹配、中文合规性。","format_check_standards":["数据类型匹配（进度/占比为整数、效率为1位小数、耗时为整数分钟）","chart_config.data无重复维度（如阶段/日期/人员不重复）","用文字标题代替数字ID（如'用户A'代替'user01'、'需求分析'代替'stage01'），标题为中文","字段名称与模板完全一致（大小写敏感），无新增/空值字段","生成结果中，返回结果code，除字段名外均为中文，图表数据与分析结论无矛盾，整体为完整JSON格式，JSON 内部需在数组元素、对象属性间添加合理换行（保持整体为单个 JSON 字符串）","校验所有数值范围：进度0-100、占比0-100（总和符合逻辑）、耗时≥0"]}}

huawei.push.appId=461323198430959681